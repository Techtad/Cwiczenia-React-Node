<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <script src="https://unpkg.com/react@16.0.0/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16.0.0/umd/react-dom.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.js"></script>
    <style>
      .MySelect {
        border: 2px solid red;
        color: red;
        text-align: center;
        padding: 5px;
      }
      .MyForm {
        border: 2px solid blue;
        color: blue;
        text-align: center;
        padding: 3px;
        margin: 2px;
      }
      span {
        color: green;
      }
    </style>
  </head>

  <body>
    <div id="react-app"></div>
    <script type="text/babel">
      class MySelect extends React.Component {
        constructor(props) {
          super(props);
          this.state = { selected: 0 };
          this.data = props.data;
          this.onChange = this.onChange.bind(this);
          this.handleSelect = props.handleSelect;
        }

        onChange(event) {
          this.setState({ selected: event.target.value }, function() {
            this.handleSelect(this.data[this.state.selected]);
          });
        }

        render() {
          let options = [];
          this.data.map(function(obj, i) {
            options.push(
              <option key={i} value={obj.id}>
                {obj.name}
              </option>
            );
          });

          return (
            <div className="MySelect">
              <h1>MySelect</h1>
              <select onChange={this.onChange}>{options}</select>
              <h2>
                wybrane: <span>{this.data[this.state.selected].name}</span>
              </h2>
            </div>
          );
        }
      }

      class MyForm extends React.Component {
        constructor(props) {
          super(props);
          this.state = {
            array: [
              { id: 0, name: "hamlet" },
              { id: 1, name: "krzyzacy" },
              { id: 2, name: "lalka" }
            ],
            array2: [
              { id: 0, name: "Kraków" },
              { id: 1, name: "Warszawa" },
              { id: 2, name: "Gdańsk" },
              { id: 3, name: "Toruń" }
            ],
            sent: ""
          };
          this.onSubmit = this.onSubmit.bind(this);
          this.handleSelect = this.handleSelect.bind(this);
        }

        onSubmit(event) {
          event.preventDefault();

          alert(this.state.sent);
          this.setState({ sent: "" });
        }

        handleSelect(data) {
          this.setState({
            sent:
              this.state.sent +
              (this.state.sent.length > 0 ? ", " : "") +
              data.name
          });
        }

        render() {
          return (
            <form onSubmit={this.onSubmit} className="MyForm">
              <h1>MyForm</h1>
              <MySelect
                data={this.state.array}
                handleSelect={this.handleSelect}
              />
              <MySelect
                data={this.state.array2}
                handleSelect={this.handleSelect}
              />
              <h2>
                wysłane: <span>{this.state.sent}</span>
              </h2>
              <input type="submit" value="wyślij" />
            </form>
          );
        }
      }

      var reactApp = document.getElementById("react-app");
      ReactDOM.render(
        <div>
          <MyForm />
          <MyForm />
        </div>,
        reactApp
      );
    </script>
  </body>
</html>
